(function(n,d){typeof exports=="object"&&typeof module!="undefined"?module.exports=d(require("element-plus"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/utils/dist/get-object-item-by-path.js"),require("vue")):typeof define=="function"&&define.amd?define(["element-plus","@panhezeng/utils/dist/check-upload.js","@panhezeng/utils/dist/get-object-item-by-path.js","vue"],d):(n=typeof globalThis!="undefined"?globalThis:n||self,n.ElMultipleUpload=d(n.ElementPlus,n.checkUpload,n.getObjectItemByPath,n.Vue))})(this,function(n,d,u,l){"use strict";function p(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var h=p(d),f=p(u),m=(e,o)=>{const a=e.__vccOpts||e;for(const[i,t]of o)a[i]=t;return a};const y={name:"ElMultipleUpload",components:{ElUpload:n.ElUpload},inheritAttrs:!1,props:{upload:{required:!0,type:Function},resPathOfUrl:{type:String,default:"data.url"},fileList:{type:Array,default(){return[]}},checkUpload:{type:Function,default:void 0},size:{type:Number,default:void 0},imageDimensions:{validator(e){return/^\[object Object\]$/.test(Object.prototype.toString.call(e))&&Object.prototype.hasOwnProperty.call(e,"width")&&Object.prototype.hasOwnProperty.call(e,"height")},type:Object,default(){return{width:void 0,height:void 0}}},accept:{validator(e){return e===""||/^(image|audio|video|text|application|\.)/.test(e)},type:String,default:""},drag:{type:Boolean,default:!0},defaultElement:{type:Boolean,default:!0},onPreview:{type:Function,default:void 0}},data(){return{elFileList:[]}},computed:{},methods:{beforeUpload(e){return this.$emit("file",e),this.$emit("before-upload",e),this.checkUpload?this.checkUpload(e):new Promise((o,a)=>{h.default(e,this.accept,this.size,this.imageDimensions.width,this.imageDimensions.height).then(i=>{i.validation?o():(i.message&&n.ElMessage.error(i.message),this.$emit("validation-error"),a())})})},requestUpload(e){return this.$emit("request-upload",e),this.upload(e)},successUpload(e,o,a){this.elFileList=a,a.some(i=>i.status==="ready"||i.status==="uploading")||this.$emit("update:fileList",a.reduce((i,t)=>(t.status==="success"&&(t.response?i.push({uid:t.uid,name:t.name,url:f.default(t.response,this.resPathOfUrl,t.url)}):i.push(t)),i),[])),this.$emit("success-upload",{response:e,file:o,fileList:a}),this.$emit("finish-upload")},beforeRemoveUpload(e,o){if(this.$refs.upload){const t=this.$refs.upload.$refs["upload-inner"].reqs;if(e){let s=e;e.uid&&(s=e.uid),t[s]&&t[s].abort&&t[s].abort()}else Object.keys(t).forEach(s=>{t[s]&&t[s].abort&&t[s].abort(),delete t[s]});o.splice(o.indexOf(e),1),this.$refs.upload.onRemove(e,o)}return!1},removeUpload(e,o){this.elFileList=o,this.$emit("update:fileList",o),this.$emit("remove-upload",{file:e,fileList:o})},previewUpload(e){window.open(e.url)}}},_={key:0,class:"el-upload-box",style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},g=[l.createElementVNode("div",{class:"el-icon-upload",style:{width:"67px",height:"67px"}},[l.createElementVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-ba633cb8":""},[l.createElementVNode("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z"})])],-1),l.createElementVNode("div",{class:"el-upload__text"},[l.createTextVNode("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),l.createElementVNode("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1)];function U(e,o,a,i,t,s){const b=l.resolveComponent("el-upload");return l.openBlock(),l.createBlock(b,{ref:"upload",class:"el-multiple-upload",action:"","before-upload":s.beforeUpload,"http-request":s.requestUpload,"on-success":s.successUpload,"on-remove":s.removeUpload,"before-remove":s.beforeRemoveUpload,"on-preview":a.onPreview||s.previewUpload,accept:a.accept,drag:a.drag,multiple:"","file-list":a.fileList},{default:l.withCtx(()=>[a.defaultElement?(l.openBlock(),l.createElementBlock("div",_,g)):l.createCommentVNode("",!0),l.renderSlot(e.$slots,"default")]),_:3},8,["before-upload","http-request","on-success","on-remove","before-remove","on-preview","accept","drag","file-list"])}var r=m(y,[["render",U]]);const c=Object.assign(r,{install:(e,o=typeof window!="undefined"&&window.ElMultipleUploadOptions&&typeof window.ElMultipleUploadOptions=="object"?window.ElMultipleUploadOptions:{})=>{Object.assign(c.props,o),e.component(r.name,r)}});return c});
